pipeline {
    agent {
        kubernetes {
            label 'jenkins-slave-argocd'
            cloud 'openshift'
            serviceAccount 'jenkins'
            containerTemplate {
                name 'jnlp'
                image "image-registry.openshift-image-registry.svc:5000/openshift/jenkins-slave-argocd"
                alwaysPullImage true
                workingDir '/tmp'
                args '${computer.jnlpmac} ${computer.name}'
                command ''
                ttyEnabled false
            }
        }
    }

    stages {
        stage ('Run Test') {
            steps {
              sh """
                  argocd help
              """
            }
        }

    }

}
